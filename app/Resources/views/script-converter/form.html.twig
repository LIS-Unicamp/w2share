{% extends 'base.html.twig' %}
{% block title %}Script Converter{% endblock %}
{% block body %}
<h1>Script Converter <small>Upload</small></h1>
{{ form_start(form) }}
    <div class="form-body">
        {% for flashMessage in app.session.flashbag.get('success') %}
            <div class="alert alert-success">
                    <button class="close" data-dismiss="alert"></button>
                    {{ flashMessage }}
            </div>            
        {% endfor %}
        {% for flashMessage in app.session.flashbag.get('error') %}
            <div class="alert alert-danger">
                    <button class="close" data-dismiss="alert"></button>
                    {{ flashMessage }}
            </div>            
        {% endfor %}
        {{ form_errors(form) }}
        <div class="row">
            <div class="col-md-12">               
                <div class="row">
                    <div class="form-group">
                        {{ form_label(form.script_file) }}
                        {{ form_widget(form.script_file, { 'attr': { 'class':'form-control' } }) }}
                        {{ form_errors(form.script_file) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-actions">
            {{ form_widget(form.send) }}             
    </div>
    {{ form_end(form) }}
</form>
{% if script_content %}
<h2>Abstract Workflow</h2>
<a href="{{ app.request.basepath }}/{{ abstract_workflow }}"><img src="{{ app.request.basepath }}/{{ abstract_workflow }}" style="max-width: 1300px"></a>

<h2>Uploaded Script</h2>
<pre class="brush: bash">
{{ script_content }}
</pre>
{% endif %}
{% endblock %}  
{% block javascripts %}  
    <!-- Include required JS files -->
<script src="http://agorbatchev.typepad.com/pub/sh/3_0_83/scripts/shCore.js" type="text/javascript"></script>
<script src="http://agorbatchev.typepad.com/pub/sh/3_0_83/scripts/shBrushBash.js" type="text/javascript"></script>
<!-- Finally, to actually run the highlighter, you need to include this JS on your page -->
<script type="text/javascript">
     SyntaxHighlighter.all()
</script>
{% endblock %}
{% block stylesheets %}
<!-- Include *at least* the core style and default theme -->
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
{% endblock %} 
